### Variables
@baseUrl = http://localhost:3000/api

### 1. Compress Image (Returns Base64 + Metadata)
# This will return a JSON object containing the base64 string of the compressed image
POST {{baseUrl}}/image/compress
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="quality"

50
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test/fixtures/test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 2. Compress and Download (Returns Binary Image)
# This will return the actual .webp file
POST {{baseUrl}}/image/compress/download
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="quality"

80
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test/fixtures/test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 3. Upscale Image (Queues Background Task)
# This will return a jobId
POST {{baseUrl}}/image/upscale
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="factor"

2
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test/fixtures/test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 4. Check Upscale Status
# Replace {jobId} with the ID returned from the upscale request
@jobId = 13
GET {{baseUrl}}/image/upscale/{{jobId}}

### 5. Stream Upscale Progress (SSE)
# This will hold a persistent connection and push data every 2s
GET {{baseUrl}}/image/upscale/{{jobId}}/progress
Accept: text/event-stream
